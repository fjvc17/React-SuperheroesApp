(this["webpackJsonpheroes-app"]=this["webpackJsonpheroes-app"]||[]).push([[0],{45:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(37),r=a.n(n),s=a(9),l=a(18),i=a(15),o=(a(45),a(14)),j=a(2),u=a(1),b=["weight","heigth"],m=function(e){var t=d(e);return Math.round(t/e.length)},d=function(e){return e.reduce((function(e,t){return Number(t)?e+Number(t):e}),0)};var h=function(){var e=function(e){var t=d(e.map((function(e){return e.powerstats.intelligence}))),a=d(e.map((function(e){return e.powerstats.strength}))),c=d(e.map((function(e){return e.powerstats.speed}))),n=d(e.map((function(e){return e.powerstats.durability}))),r=d(e.map((function(e){return e.powerstats.power}))),s=d(e.map((function(e){return e.powerstats.combat})));return{weight:m(e.map((function(e){return e.appearance.weight[1].split(" ")[0]}))),heigth:m(e.map((function(e){return e.appearance.height[1].split(" ")[0]}))),intelligence:t,strength:a,speed:c,durability:n,power:r,combat:s}}(Object(c.useContext)(T).context.team),t=e.weight,a=e.heigth,n=Object(l.a)(e,b),r=Object.values(n).sort((function(e,t){return t-e}))[0],s=function(e,t){return Object.keys(e).find((function(a){return e[a]===t}))}(n,r).toUpperCase();return Object(u.jsxs)("div",{className:"row mb-3",children:[Object(u.jsx)("div",{className:"col-3",children:"The main stat is ".concat(s)}),Object(u.jsx)("div",{className:"col-3",children:Object(u.jsxs)("ul",{className:"list-group",children:[Object(u.jsxs)("li",{className:"list-group-item",children:["Average weight: ",t," kg"]}),Object(u.jsxs)("li",{className:"list-group-item",children:["Average heigth: ",a," cm"]})]})}),Object(u.jsx)("div",{className:"col-3 offset-1",children:Object(u.jsx)("ul",{className:"list-group",children:Object.keys(n).map((function(e){return Object(u.jsx)("li",{className:"list-group-item",children:"Total ".concat(e,": ").concat(n[e])})}))})})]})};var p=function(){var e=Object(c.useContext)(T),t=Object(j.g)();return Object(u.jsxs)("div",{className:"container-fluid",children:[e.context.team.length?Object(u.jsx)(h,{}):"Go to search to find heroes for your team",Object(u.jsx)("div",{className:"card-group",children:e.context.team?e.context.team.map((function(a){return Object(u.jsxs)("div",{className:"card ms-4 mb-3",style:{maxWidth:"18rem"},children:[Object(u.jsx)("img",{src:a.image.url,className:"card-img-top",alt:a.name}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:a.name}),Object(u.jsx)("ul",{className:"list-group list-group-flush",children:Object.keys(a.powerstats).map((function(e){return Object(u.jsx)("li",{class:"list-group-item",children:"".concat(e,": ").concat(a.powerstats[e])})}))})]}),Object(u.jsxs)("div",{className:"card-footer",children:[Object(u.jsx)("button",{onClick:function(){return function(a){e.setContext(Object(s.a)(Object(s.a)({},e.context),{},{selectedHero:a})),t.push("/hero/".concat(a.id))}(a)},className:"btn btn-primary",children:"Details"}),Object(u.jsx)("button",{className:"btn btn-danger ms-3",onClick:function(){return function(t){var a=e.context.team.filter((function(e){return e.id!==t}));e.setContext(Object(s.a)(Object(s.a)({},e.context.team),{},{team:a}))}(a.id)},children:"Remove"})]})]},a.id)})):null})]})},O=a(22),x=a(21),v=a.n(x),g=function(){var e=Object(j.g)(),t=Object(O.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},onSubmit:function(t){v.a.post("http://challenge-react.alkemy.org",{email:t.email,password:t.password}).then((function(t){localStorage.setItem("token",t.token),e.replace("/")}))}});return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("form",{onSubmit:t.handleSubmit,className:"container mt-5",children:[Object(u.jsx)("input",{onBlur:t.handleBlur,placeholder:"email",className:"form-control mb-4",onChange:t.handleChange,type:"email",id:"email",name:"email",value:t.values.email}),t.errors.email&&t.touched.email?Object(u.jsx)("div",{className:"invalid-feedback d-block",children:t.errors.email}):null,Object(u.jsx)("input",{placeholder:"password",onBlur:t.handleBlur,className:"form-control mb-4",onChange:t.handleChange,type:"password",id:"password",name:"password",value:t.values.password}),Object(u.jsx)("button",{className:"btn btn-primary",children:"Login"})]})})},f=a(27),N=a.n(f),w=a(40);var k=function(e){var t=e.heroName,a=e.avatar,c=e.buttonDisabled,n=e.onClick;return Object(u.jsxs)("div",{className:"card ms-4 mb-3",style:{width:"18rem"},children:[Object(u.jsx)("img",{src:a,className:"card-img-top",alt:t}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:t}),Object(u.jsx)("button",{className:"btn btn-primary",disabled:c,onClick:n,children:c?"your team is full":"Add to team"})]})]})},y="idle",C="loading",S="resolved";var A=function(){var e=Object(c.useContext)(T),t=Object(c.useState)(null),a=Object(i.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(y),o=Object(i.a)(l,2),j=o[0],b=o[1],m=Object(c.useState)(0),d=Object(i.a)(m,2),h=d[0],p=d[1],x=Object(O.a)({initialValues:{heroName:""}});return Object(c.useEffect)((function(){function e(){return(e=Object(w.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.values.heroName){e.next=8;break}return b(C),e.next=4,v.a.get("https://superheroapi.com/api/10226504347219088/search/".concat(x.values.heroName));case 4:t=e.sent,a=t.data,r(a),b(S);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x.touched.heroName,h]),Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsxs)("div",{className:"row mb-4",children:[Object(u.jsx)("input",Object(s.a)(Object(s.a)({},x.getFieldProps("heroName")),{},{className:"col-4 ms-3",type:"text",placeholder:"Busca un heroe",id:"heroName",name:"heroName"})),Object(u.jsx)("button",{onClick:function(){return p(h+1)},className:"btn btn-primary col-1 ms-3",children:"Search"})]}),Object(u.jsx)("div",{className:"row ms-4",children:j===S?n.results?n.results.map((function(t){return Object(u.jsx)(k,{buttonDisabled:6===e.context.team.length,powerStats:t.powerstats,showStats:!0,onClick:function(){return e.setContext(Object(s.a)(Object(s.a)({},e.context),{},{team:e.context.team.concat(t)}))},heroName:t.name,avatar:t.image.url},t.id)})):Object(u.jsx)("div",{children:"No hero found"}):null})]})};function B(e){var t=e.name,a=e.value;return Object(u.jsx)("li",{className:"list-group-item",children:"".concat(t,": ").concat(a)})}var I=function(){var e=Object(c.useContext)(T).context.selectedHero;return Object(u.jsxs)("div",{className:"card ms-4 mb-3",style:{width:"18rem"},children:[Object(u.jsx)("img",{src:e.image.url,className:"card-img-top",alt:e.name}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:e.name}),Object(u.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(u.jsx)(B,{name:"weight",value:e.appearance.weight[1]}),Object(u.jsx)(B,{name:"heigth",value:e.appearance.height[1]}),Object(u.jsx)(B,{name:"name",value:e.name}),Object(u.jsx)(B,{name:"alias",value:e.biography.aliases.join(", ")}),Object(u.jsx)(B,{name:"eye color",value:e.appearance["eye-color"]}),Object(u.jsx)(B,{name:"hair color",value:e.appearance["hair-color"]}),Object(u.jsx)(B,{name:"workplace",value:e.work.base})]})]})]})};var H=function(){var e=Object(j.g)();return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-5",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(o.b,{className:"navbar-brand",to:"/",children:"Heroes"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:Object(u.jsxs)("div",{className:"navbar-nav",children:[Object(u.jsx)(o.b,{className:"nav-link",to:"/",children:"Team"}),Object(u.jsx)(o.b,{className:"nav-link",to:"/search",children:"Search"}),Object(u.jsx)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){localStorage.removeItem("token"),e.replace("/login")},children:"Log out"})]})})]})})},M=["children"],T=Object(c.createContext)({});function D(e){var t=e.children,a=Object(l.a)(e,M),c={token:localStorage.getItem("token")};return Object(u.jsx)(j.b,Object(s.a)(Object(s.a)({},a),{},{render:function(e){var a=e.location;return c.token?t:Object(u.jsx)(j.a,{to:{pathname:"/login",state:{from:a}}})}}))}var Z=function(){var e=Object(c.useState)({selectedHero:null,team:[]}),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(u.jsx)(T.Provider,{value:{context:a,setContext:n},children:Object(u.jsx)(o.a,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)(H,{}),Object(u.jsxs)(j.d,{children:[Object(u.jsx)(j.b,{path:"/login",children:Object(u.jsx)(g,{})}),Object(u.jsx)(D,{path:"/search",children:Object(u.jsx)(A,{})}),Object(u.jsx)(D,{path:"/hero/:heroId",children:Object(u.jsx)(I,{})}),Object(u.jsx)(D,{path:"/",children:Object(u.jsx)(p,{})})]})]})})})};r.a.render(Object(u.jsx)(Z,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.7d56d0fa.chunk.js.map